<!-- ========== Template Extension ========== -->
<!-- This template extends the base.html layout to inherit navigation, footer, and common structure -->
{% extends "base.html" %}

<!-- ========== Page Title Block ========== -->
<!-- Set the browser tab title to show which file's summary is being viewed -->
{% block title %}Summary - {{ material.filename }}{% endblock %}

<!-- ========== Main Content Block ========== -->
<!-- This is where the document summary and statistics will appear -->
{% block content %}
<div class="container summary-container">
    <!-- ========== Page Header Section ========== -->
    <!-- Shows the page title, filename, and navigation back to dashboard -->
    <div class="summary-header">
        <h1><i class="fas fa-file-alt"></i> Document Summary</h1>
        <p class="subtitle">{{ material.filename }}</p>
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <!-- ========== Summary Display Section ========== -->
    <!-- Check if summary data exists to display -->
    {% if summary %}
    <div class="summary-content">
        <!-- ========== Summary Statistics Section ========== -->
        <!-- Shows three key statistics about the document and summary -->
        <div class="summary-stats">
            <!-- ========== Original Word Count Stat ========== -->
            <!-- Displays how many words were in the original document -->
            <div class="stat-box">
                <i class="fas fa-file"></i>
                <div>
                    <h3>{{ summary.original_length }}</h3>
                    <p>Original Words</p>
                </div>
            </div>
            
            <!-- ========== Summary Word Count Stat ========== -->
            <!-- Displays how many words are in the generated summary -->
            <div class="stat-box">
                <i class="fas fa-compress"></i>
                <div>
                    <h3>{{ summary.summary_length }}</h3>
                    <p>Summary Words</p>
                </div>
            </div>
            
            <!-- ========== Compression Ratio Stat ========== -->
            <!-- Shows percentage of original length (how much was compressed) -->
            <div class="stat-box">
                <i class="fas fa-percentage"></i>
                <div>
                    <!-- Calculate and display compression as percentage -->
                    <h3>{{ (summary.compression_ratio * 100) | round(1) }}%</h3>
                    <p>Compression</p>
                </div>
            </div>
        </div>

        <!-- ========== Main Summary Text Section ========== -->
        <!-- Displays the condensed version of the document -->
        <div class="summary-section">
            <h2><i class="fas fa-align-left"></i> Summary</h2>
            <!-- Summary text content generated by the AI -->
            <div class="summary-text">
                {{ summary.summary_text }}
            </div>
        </div>

        <!-- ========== Key Points Section ========== -->
        <!-- Shows bullet-pointed list of most important points from the document -->
        <div class="key-points-section">
            <h2><i class="fas fa-list-ul"></i> Key Points</h2>
            <!-- List of key points extracted from the document -->
            <ul class="key-points-list">
                <!-- Loop through each key point and display with checkmark icon -->
                {% for point in summary.key_points %}
                <li>
                    <i class="fas fa-check-circle"></i>
                    {{ point }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    
    <!-- ========== Empty State Section ========== -->
    <!-- Shown when no summary is available for this material -->
    {% else %}
    <div class="empty-state">
        <i class="fas fa-file-alt"></i>
        <h2>No summary available</h2>
    </div>
    {% endif %}
</div>
{% endblock %}